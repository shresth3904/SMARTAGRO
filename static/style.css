:root {
  --bg-dark: #121212;
  --nav-dark: #1a1a1a;
  --card-dark: #1e1e1e;
  --card-border: #2c2c2c;
  --green-accent: #00ff85;
  --green-glow: rgba(0, 255, 133, 0.4);
  --text-primary: #e0e0e0;
  --text-secondary: #a0a0a0;
  --blue-accent: #4a90e2;
  --orange-accent: #ff7034;
  --cyan-accent: #00bcd4;
  --red-accent: #e63946;
  --font-body: 'Poppins', sans-serif;
  --font-mono: 'Roboto Mono', monospace;
}

body {
  margin: 0;
  background-color: var(--bg-dark);
  color: var(--text-primary);
  font-family: var(--font-body);
}

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 4%;
  background-color: var(--nav-dark);
  border-bottom: 1px solid var(--card-border);
  position: sticky;
  top: 0;
  z-index: 1000;
}

#logo {
  font-family: var(--font-mono);
  font-size: 1.8em;
  font-weight: 700;
  color: var(--green-accent);
}

nav a {
  text-decoration: none;
  color: var(--text-primary);
  font-weight: 600;
  transition: color 0.3s ease;
  margin-left: 30px;
}
nav a:hover { color: var(--green-accent); }

main {
  padding: 20px 4%;
}

main > h1 {
  font-size: 2.8em;
  color: #fff;
  margin-bottom: 10px;
}

#additional_links, #current_settings_display {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  margin-bottom: 30px;
  align-items: center;
}

#link_buttons {
  text-decoration: none;
  color: var(--text-primary);
  background-color: var(--card-border);
  padding: 8px 18px;
  border-radius: 25px;
  font-weight: 600;
  transition: all 0.3s ease;
}
#link_buttons:hover {
  background-color: var(--green-accent);
  color: var(--bg-dark);
  transform: translateY(-2px);
}

#current_settings_display {
  background-color: var(--nav-dark);
  padding: 15px;
  border-radius: 10px;
}
#setting_parameter {
  font-family: var(--font-mono);
  font-size: 0.9em;
  color: var(--text-secondary);
}

.card {
  background-color: var(--card-dark);
  padding: 25px;
  border-radius: 15px;
  border: 1px solid var(--card-border);
  transition: transform 0.3s, box-shadow 0.3s;
}
.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}
.card h2, .card h3 {
  color: #fff;
  border-bottom: 2px solid var(--green-accent);
  padding-bottom: 10px;
  margin-bottom: 25px;
  display: inline-block;
  font-size: 1.2em;
  margin-top: 0;
}

#connection_status, #weather, #parameter_box, .pump_controls, #water_section, .graph {
  background-color: var(--card-dark);
  padding: 25px;
  border-radius: 15px;
  border: 1px solid var(--card-border);
  transition: transform 0.3s, box-shadow 0.3s;
}
#connection_status:hover, #weather:hover, #parameter_box:hover, .pump_controls:hover, #water_section:hover, .graph:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}

#box1, #box2, .matrix {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 20px;
  margin-bottom: 20px;
}

#connection_status_item { display: flex; justify-content: space-between; align-items: center; width: 100%; margin-bottom: 10px; }
.connected, .disconnected { padding: 5px 15px; border-radius: 20px; font-weight: 600; font-family: var(--font-mono); }
.connected { background-color: var(--green-accent); color: var(--bg-dark); }
.disconnected { background-color: var(--red-accent); color: #fff; }

#weather_cond { display: flex; align-items: center; gap: 20px; }
#W_logo svg { width: 80px; height: 80px; }
.weather-card-id { color: var(--text-secondary); margin-top: 5px; }
#W_temp { font-size: 2.8em; font-weight: 700; margin: 0; }
#prob { font-family: var(--font-mono); }
#prob_value { color: var(--blue-accent); }

#parameters {
  display: flex;
  align-items: center;
  justify-content: space-around;
  text-align: center;
  gap: 20px;
  min-height: 250px;
}

.moisture-container, .humidity-container, .temp {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  height: 100%;
  flex: 1;
}

#parameters p {
  font-weight: 600;
  color: var(--text-secondary);
  font-size: 0.9em;
}

.moisture-bar, .thermometer, .humidity-gauge {
  background: #111;
  position: relative;
  overflow: hidden;
  box-shadow: inset 0 2px 10px rgba(0,0,0,0.5);
  margin: 15px 0;
}

.moisture-bar { width: 40px; height: 150px; border-radius: 20px; }
.moisture-fill { position: absolute; bottom: 0; width: 100%; background: linear-gradient(to top, var(--green-accent), #69f0ae); transition: height 1s ease; }

.thermometer { width: 40px; height: 150px; border-radius: 20px; }
.mercury { position: absolute; bottom: 0; width: 100%; background: linear-gradient(to top, var(--orange-accent), #ffab91); transition: height 1s ease; }

.humidity-gauge { width: 80px; height: 80px; border-radius: 50%; }
.humidity-fill { position: absolute; bottom: 0; width: 100%; background: linear-gradient(to top, var(--cyan-accent), #80deea); transition: height 1s ease; }

.moisture-value, .temp-value, .humidity-value {
  font-family: var(--font-mono);
  font-size: 1.6em;
  font-weight: 700;
}
.moisture-value { color: var(--green-accent); }
.temp-value { color: var(--orange-accent); }
.humidity-value { color: var(--cyan-accent); }

#water_section { text-align: center; }
.water-tank { width: 120px; height: 200px; border: 4px solid var(--blue-accent); border-radius: 15px; margin: 10px auto; position: relative; background: var(--border-color); overflow: hidden; box-shadow: inset 0 2px 10px rgba(0,0,0,0.5); }
.water { position: absolute; bottom: 0; width: 100%; background: var(--blue-accent); transition: height 1s ease; }
.level-value { font-family: var(--font-mono); font-size: 2em; color: var(--blue-accent); margin-top: 10px; font-weight: 700; }
#tank_info { font-size: 0.8em; color: var(--text-secondary); margin-top: 10px; line-height: 1.5; }

#opr_switch { display: flex; margin-bottom: 20px; }
.opr_btn, .selected_opr { flex: 1; padding: 12px; border: 1px solid var(--card-border); background: var(--card-dark); color: var(--text-secondary); font-weight: 600; cursor: pointer; transition: all 0.3s; }
.selected_opr { background: var(--green-accent); color: var(--bg-dark); box-shadow: 0 0 15px var(--green-glow); border-color: var(--green-accent); }
.opr_btn:hover { background-color: var(--card-border); color: #fff; }

#pump_btn, .pump_btn_off, .pump_btn_disabled { width: 100%; padding: 15px; border-radius: 5px; font-weight: 700; font-size: 1.1em; cursor: pointer; transition: all 0.3s; border: none; margin-top: 20px; }
.pump_btn_off { background-color: var(--orange-accent); color: #fff; }
.pump_btn_disabled { background-color: var(--card-border); color: var(--text-secondary); cursor: not-allowed; }
#pump_btn:hover:not(:disabled), .pump_btn_off:hover:not(:disabled) { transform: translateY(-2px); filter: brightness(1.1); }
#pump_btn:active:not(:disabled), .pump_btn_off:active:not(:disabled) { transform: translateY(0); filter: brightness(1); }

#status_box { display: grid; grid-template-columns: 1fr 1fr; text-align: center; margin-top: 20px; }
#pump_status_value_icon { font-family: var(--font-mono); font-weight: 700; font-size: 1.2em; }

.matrix { grid-column: 1 / -1; }
.graph { background: #000; border: 1px solid var(--card-border); }


@media (max-width: 768px) {
  main { padding: 20px 3%; }
  main > h1 { font-size: 2em; }
  #box1, #box2, .matrix { grid-template-columns: 1fr; }
  #parameters { flex-wrap: wrap; }
}